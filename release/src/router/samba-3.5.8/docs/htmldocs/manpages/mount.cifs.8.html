<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>mount.cifs</title><link rel="stylesheet" href="../samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" lang="en"><a name="mount.cifs.8"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>mount.cifs &#8212; mount using the Common Internet File System (CIFS)</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="literal">mount.cifs</code> {service} {mount-point} [-o options]</p></div></div><div class="refsect1" lang="en"><a name="id2522927"></a><h2>DESCRIPTION</h2><p>This tool is part of the <a class="citerefentry" href="samba.7.html"><span class="citerefentry"><span class="refentrytitle">samba</span>(7)</span></a> suite.</p><p>mount.cifs mounts a Linux CIFS filesystem. It
is usually invoked indirectly by
the <a class="citerefentry" href="mount.8.html"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> command when using the 
"-t cifs" option. This command only works in Linux, and the kernel must
support the cifs filesystem. The CIFS protocol is the successor to the 
SMB protocol and is supported by most Windows servers and many other
commercial servers and Network Attached Storage appliances as well as 
by the popular Open Source server Samba.
	</p><p>
	The mount.cifs utility attaches the UNC name (exported network resource)
	specified as <span class="emphasis"><em>service</em></span> (using //server/share syntax,
	where "server" is the server name or IP address and "share" is the name
	of the share) to the local directory <span class="emphasis"><em>mount-point</em></span>.
	</p><p>
		Options to <span class="emphasis"><em>mount.cifs</em></span> are specified as a comma-separated
list of key=value pairs. It is possible to send options other
than those listed here, assuming that the cifs filesystem kernel module (cifs.ko) supports them.   
Unrecognized cifs mount options passed to the cifs vfs kernel code will be logged to the
kernel log.

	</p><p><span class="emphasis"><em>mount.cifs</em></span> causes the cifs vfs to launch a thread named cifsd. After mounting it keeps running until
		the mounted resource is unmounted (usually via the umount utility).
	</p><p>
		<span class="emphasis"><em>mount.cifs -V</em></span> command displays the version of cifs mount helper.
	</p><p>

		<span class="emphasis"><em>modinfo cifs</em></span> command displays the version of cifs module.
	</p></div><div class="refsect1" lang="en"><a name="id2483383"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term">user=<em class="replaceable"><code>arg</code></em></span></dt><dd><p>specifies the username to connect as. If
				this is not given, then the environment variable <span class="emphasis"><em>USER</em></span> is used. This option can also take the
form "user%password" or "workgroup/user" or
"workgroup/user%password" to allow the password and workgroup
to be specified as part of the username.
		</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
	The cifs vfs accepts the parameter <em class="parameter"><code>user=</code></em>, or for users familiar with smbfs it accepts the longer form of the parameter <em class="parameter"><code>username=</code></em>.  Similarly the longer smbfs style parameter names may be accepted as synonyms for the shorter cifs parameters <em class="parameter"><code>pass=</code></em>,<em class="parameter"><code>dom=</code></em> and <em class="parameter"><code>cred=</code></em>.
	</p></div></dd><dt><span class="term">password=<em class="replaceable"><code>arg</code></em></span></dt><dd><p>specifies the CIFS password. If this
option is not given then the environment variable
<span class="emphasis"><em>PASSWD</em></span> is used. If the password is not specified
directly or indirectly via an argument to mount, <span class="emphasis"><em>mount.cifs</em></span> will prompt
for a password, unless the guest option is specified.
</p><p>Note that a password which contains the delimiter
character (i.e. a comma ',') will fail to be parsed correctly
on the command line.  However, the same password defined
in the PASSWD environment variable or via a credentials file (see
below) or entered at the password prompt will be read correctly.
</p></dd><dt><span class="term">credentials=<em class="replaceable"><code>filename</code></em></span></dt><dd><p>
				specifies a file that contains a username
				and/or password and optionally the name of the
				workgroup. The format of the file is:
			</p><pre class="programlisting">
		username=<em class="replaceable"><code>value</code></em>
		password=<em class="replaceable"><code>value</code></em>
		domain=<em class="replaceable"><code>value</code></em>
</pre><p>
This is preferred over having passwords in plaintext in a
shared file, such as <code class="filename">/etc/fstab</code>. Be sure to protect any
credentials file properly.
		</p></dd><dt><span class="term">uid=<em class="replaceable"><code>arg</code></em></span></dt><dd><p>sets the uid that will own all files or directories on the
mounted filesystem when the server does not provide ownership
information. It may be specified as either a username or a numeric uid.
When not specified, the default is uid 0.  The mount.cifs helper must be
at version 1.10 or higher to support specifying the uid in non-numeric
form. See the section on FILE AND DIRECTORY OWNERSHIP AND PERMISSIONS below for more
information.  </p></dd><dt><span class="term">forceuid</span></dt><dd><p>instructs the client to ignore any uid provided by
the server for files and directories and to always assign the owner to
be the value of the uid= option. See the section on FILE AND DIRECTORY OWNERSHIP AND PERMISSIONS below for more information.</p></dd><dt><span class="term">gid=<em class="replaceable"><code>arg</code></em></span></dt><dd><p>sets the gid that will own all files or
directories on the mounted filesystem when the server does not provide
ownership information.  It may be specified as either a groupname or a
numeric gid.  When not specified, the default is gid 0. The mount.cifs
helper must be at version 1.10 or higher to support specifying the gid
in non-numeric form. See the section on FILE AND DIRECTORY OWNERSHIP AND
PERMISSIONS below for more information.</p></dd><dt><span class="term">forcegid</span></dt><dd><p>instructs the client to ignore any gid provided by
the server for files and directories and to always assign the owner to
be the value of the gid= option. See the section on FILE AND DIRECTORY OWNERSHIP AND PERMISSIONS below for more information.</p></dd><dt><span class="term">port=<em class="replaceable"><code>arg</code></em></span></dt><dd><p>sets the port number on the server to attempt to contact to negotiate
CIFS support.  If the CIFS server is not listening on this port or
if it is not specified, the default ports will be tried i.e. 
port 445 is tried and if no response then port 139 is tried.
		</p></dd><dt><span class="term">servern=<em class="replaceable"><code>arg</code></em></span></dt><dd><p>
		Specify the server netbios name (RFC1001 name) to use
                when attempting to setup a session to the server. Although
		rarely needed for mounting to newer servers, this option
                is needed for mounting to some older servers (such
                as OS/2 or Windows 98 and Windows ME) since when connecting
		over port 139 they, unlike most newer servers, do not
                support a default server name.  A server name can be up
                to 15 characters long and is usually uppercased.
                </p></dd><dt><span class="term">netbiosname=<em class="replaceable"><code>arg</code></em></span></dt><dd><p>When mounting to servers via port 139, specifies the RFC1001
                source name to use to represent the client netbios machine
                name when doing the RFC1001 netbios session initialize.
		</p></dd><dt><span class="term">file_mode=<em class="replaceable"><code>arg</code></em></span></dt><dd><p>If the server does not support the CIFS Unix extensions this
				overrides the default file mode.</p></dd><dt><span class="term">dir_mode=<em class="replaceable"><code>arg</code></em></span></dt><dd><p>If the server does not support the CIFS Unix extensions this
				overrides the default mode for directories. </p></dd><dt><span class="term">ip=<em class="replaceable"><code>arg</code></em></span></dt><dd><p>sets the destination IP address.  This option is set automatically if the server name portion of the requested UNC name can be resolved so rarely needs to be specified by the user.</p></dd><dt><span class="term">domain=<em class="replaceable"><code>arg</code></em></span></dt><dd><p>sets the domain (workgroup) of the user </p></dd><dt><span class="term">guest</span></dt><dd><p>don't prompt for a password </p></dd><dt><span class="term">iocharset</span></dt><dd><p>Charset used to convert local path names to and from
		Unicode. Unicode is used by default for network path
		names if the server supports it. If iocharset is
		not specified then the nls_default specified
		during the local client kernel build will be used.
		If server does not support Unicode, this parameter is
		unused. </p></dd><dt><span class="term">ro</span></dt><dd><p>mount read-only</p></dd><dt><span class="term">rw</span></dt><dd><p>mount read-write</p></dd><dt><span class="term">setuids</span></dt><dd><p>If the CIFS Unix extensions are negotiated with the server
                the client will attempt to set the effective uid and gid of
                the local process on newly created files, directories, and
                devices (create, mkdir, mknod). If the CIFS Unix Extensions
                are not negotiated, for newly created files and directories
                instead of using the default uid and gid specified on the
                the mount, cache the new file's uid and gid locally which means
                that the uid for the file can change when the inode is
                reloaded (or the user remounts the share).</p></dd><dt><span class="term">nosetuids</span></dt><dd><p>The client will not attempt to set the uid and gid on
                on newly created files, directories, and devices (create,
                mkdir, mknod) which will result in the server setting the
                uid and gid to the default (usually the server uid of the
                user who mounted the share).  Letting the server (rather than
                the client) set the uid and gid is the default.If the CIFS
                Unix Extensions are not negotiated then the uid and gid for
                new files will appear to be the uid (gid) of the mounter or the
                uid (gid) parameter specified on the mount.</p></dd><dt><span class="term">perm</span></dt><dd><p>Client does permission checks (vfs_permission check of uid
                and gid of the file against the mode and desired operation),
                Note that this is in addition to the normal ACL check on the
                target machine done by the server software.
                Client permission checking is enabled by default.</p></dd><dt><span class="term">noperm</span></dt><dd><p>Client does not do permission checks.  This can expose
                files on this mount to access by other users on the local
                client system. It is typically only needed when the server
                supports the CIFS Unix Extensions but the UIDs/GIDs on the
                client and server system do not match closely enough to allow
                access by the user doing the mount.
                Note that this does not affect the normal ACL check on the
                target machine done by the server software (of the server
                ACL against the user name provided at mount time).</p></dd><dt><span class="term">dynperm</span></dt><dd><p>Instructs the server to maintain ownership and
permissions in memory that can't be stored on the server. This information can disappear at any time (whenever the inode is flushed from the cache), so while this may help make some applications work, it's behavior is somewhat unreliable. See the section below on FILE AND DIRECTORY OWNERSHIP AND PERMISSIONS for more information.
		</p></dd><dt><span class="term">directio</span></dt><dd><p>Do not do inode data caching on files opened on this mount.
                This precludes mmaping files on this mount. In some cases
                with fast networks and little or no caching benefits on the
                client (e.g. when the application is doing large sequential
                reads bigger than page size without rereading the same data)
                this can provide better performance than the default
                behavior which caches reads (readahead) and writes
                (writebehind) through the local Linux client pagecache
                if oplock (caching token) is granted and held. Note that
                direct allows write operations larger than page size
                to be sent to the server. On some kernels this requires the cifs.ko module
		to be built with the CIFS_EXPERIMENTAL configure option.</p></dd><dt><span class="term">mapchars</span></dt><dd><p>Translate six of the seven reserved characters (not backslash, but including the colon, question mark, pipe, asterik, greater than and less than characters)
                to the remap range (above 0xF000), which also
                allows the CIFS client to recognize files created with
                such characters by Windows's POSIX emulation. This can
                also be useful when mounting to most versions of Samba
                (which also forbids creating and opening files
                whose names contain any of these seven characters).
                This has no effect if the server does not support
                Unicode on the wire. Please note that the files created
		with mapchars mount option may not be accessible
		if the share is mounted without that option.</p></dd><dt><span class="term">nomapchars</span></dt><dd><p>Do not translate any of these seven characters (default)</p></dd><dt><span class="term">intr</span></dt><dd><p>currently unimplemented</p></dd><dt><span class="term">nointr</span></dt><dd><p>(default) currently unimplemented </p></dd><dt><span class="term">hard</span></dt><dd><p>The  program  accessing  a file on the cifs mounted file system will hang when the
              server crashes.</p></dd><dt><span class="term">soft</span></dt><dd><p>(default) The  program  accessing  a file on the cifs mounted file system will not hang when the server crashes and will return errors to the user application.</p></dd><dt><span class="term">noacl</span></dt><dd><p>Do not allow POSIX ACL operations even if server would support them.</p><p>
		The CIFS client can get and set POSIX ACLs (getfacl, setfacl) to Samba servers
		version 3.0.10 and later.  Setting POSIX ACLs requires enabling both XATTR and
		then POSIX support in the CIFS configuration options when building the cifs
		module.  POSIX ACL support can be disabled on a per mount basis by specifying
		"noacl" on mount.</p></dd><dt><span class="term">nocase</span></dt><dd><p>Request case insensitive path name matching (case
                sensitive is the default if the server suports it).
		</p></dd><dt><span class="term">sec=</span></dt><dd><p>Security mode.  Allowed values are:</p><div class="itemizedlist"><ul type="disc"><li><p>none    attempt to connection as a null user (no name) </p></li><li><p>krb5    Use Kerberos version 5 authentication</p></li><li><p>krb5i   Use Kerberos authentication and packet signing</p></li><li><p>ntlm    Use NTLM password hashing (default)</p></li><li><p>ntlmi   Use NTLM password hashing with signing (if
                                /proc/fs/cifs/PacketSigningEnabled on or if
                                server requires signing also can be the default)</p></li><li><p>ntlmv2  Use NTLMv2 password hashing</p></li><li><p>ntlmv2i Use NTLMv2 password hashing with packet signing</p></li></ul></div><p>[NB This [sec parameter] is under development and expected to be available in cifs kernel module 1.40 and later]
                </p></dd><dt><span class="term">nobrl</span></dt><dd><p>Do not send byte range lock requests to the server.
                This is necessary for certain applications that break
                with cifs style mandatory byte range locks (and most
                cifs servers do not yet support requesting advisory
                byte range locks).
                </p></dd><dt><span class="term">sfu</span></dt><dd><p>
		When the CIFS Unix Extensions are not negotiated, attempt to
                create device files and fifos in a format compatible with
                Services for Unix (SFU).  In addition retrieve bits 10-12
                of the mode via the SETFILEBITS extended attribute (as
                SFU does).  In the future the bottom 9 bits of the mode
                mode also will be emulated using queries of the security
                descriptor (ACL). [NB: requires version 1.39 or later
		of the CIFS VFS.  To recognize symlinks and be able
		to create symlinks in an SFU interoperable form
		requires version 1.40 or later of the CIFS VFS kernel module.
                </p></dd><dt><span class="term">serverino</span></dt><dd><p>Use inode numbers (unique persistent file identifiers)
		returned by the server instead of automatically generating
                temporary inode numbers on the client.  Although server inode numbers
                make it easier to spot hardlinked files (as they will have
                the same inode numbers) and inode numbers may be persistent (which is
		userful for some sofware),
                the server does not guarantee that the inode numbers
                are unique if multiple server side mounts are exported under a
                single share (since inode numbers on the servers might not
                be unique if multiple filesystems are mounted under the same
                shared higher level directory).  Note that not all 
                servers support returning server inode numbers, although
		those that support the CIFS Unix Extensions, and Windows 2000 and
		later servers typically do support this (although not necessarily
		on every local server filesystem). Parameter has no effect if
                the server lacks support for returning inode numbers or equivalent.
		</p></dd><dt><span class="term">noserverino</span></dt><dd><p>
			Client generates inode numbers (rather than
		using the actual one from the server) by default.
		</p><p>
			See section <span class="emphasis"><em>INODE NUMBERS</em></span> for
		more information.
		</p></dd><dt><span class="term">nounix</span></dt><dd><p>
			Disable the CIFS Unix Extensions for this mount. This
		can be useful in order to turn off multiple settings at once.
		This includes POSIX acls, POSIX locks, POSIX paths, symlink
		support and retrieving uids/gids/mode from the server. This
		can also be useful to work around a bug in a server that
		supports Unix Extensions.
		</p><p>
		See section <span class="emphasis"><em>INODE NUMBERS</em></span> for
		more information.
		</p></dd><dt><span class="term">nouser_xattr</span></dt><dd><p>(default) Do not allow getfattr/setfattr to get/set xattrs, even if server would support it otherwise. </p></dd><dt><span class="term">rsize=<em class="replaceable"><code>arg</code></em></span></dt><dd><p>default network read size (usually 16K). The client currently
                can not use rsize larger than CIFSMaxBufSize. CIFSMaxBufSize
                defaults to 16K and may be changed (from 8K to the maximum
                kmalloc size allowed by your kernel) at module install time
                for cifs.ko. Setting CIFSMaxBufSize to a very large value
                will cause cifs to use more memory and may reduce performance
                in some cases.  To use rsize greater than 127K (the original
                cifs protocol maximum) also requires that the server support
                a new Unix Capability flag (for very large read) which some
                newer servers (e.g. Samba 3.0.26 or later) do. rsize can be
                set from a minimum of 2048 to a maximum of 130048 (127K or
                CIFSMaxBufSize, whichever is smaller)

		</p></dd><dt><span class="term">wsize=<em class="replaceable"><code>arg</code></em></span></dt><dd><p>default network write size (default 57344)
                maximum wsize currently allowed by CIFS is 57344 (fourteen
                4096 byte pages)</p></dd><dt><span class="term">--verbose</span></dt><dd><p>Print additional debugging information for the mount. Note that this parameter must be specified before the -o. For example:</p><p>mount -t cifs //server/share /mnt --verbose -o user=username</p></dd></dl></div></div><div class="refsect1" lang="en"><a name="id2532669"></a><h2>SERVICE FORMATTING AND DELIMITERS</h2><p>
		It's generally preferred to use forward slashes (/) as a delimiter in service names. They are considered to be the "universal delimiter" since they are generally not allowed to be embedded within path components on Windows machines and the client can convert them to blackslashes (\) unconditionally. Conversely, backslash characters are allowed by POSIX to be part of a path component, and can't be automatically converted in the same way.
	</p><p>
		mount.cifs will attempt to convert backslashes to forward slashes where it's able to do so, but it cannot do so in any path component following the sharename.
	</p></div><div class="refsect1" lang="en"><a name="id2532692"></a><h2>INODE NUMBERS</h2><p>
		When Unix Extensions are enabled, we use the actual inode
	number provided by the server in response to the POSIX calls as an
	inode number.
	</p><p>
		When Unix Extensions are disabled and "serverino" mount option
	is enabled there is no way to get the server inode number. The
	client typically maps the server-assigned "UniqueID" onto an inode
	number.
	</p><p>
		Note that the UniqueID is a different value from the server
	inode number. The UniqueID value is unique over the scope of the entire
	server and is often greater than 2 power 32. This value often makes
	programs that are not compiled with LFS (Large File Support), to
	trigger a glibc EOVERFLOW error as this won't fit in the target
	structure field. It is strongly recommended to compile your programs
	with LFS support (i.e. with -D_FILE_OFFSET_BITS=64) to prevent this
	problem. You can also use "noserverino" mount option to generate inode
	numbers smaller than 2 power 32 on the client. But you may not be able
	to detect hardlinks properly.
	</p></div><div class="refsect1" lang="en"><a name="id2532725"></a><h2>FILE AND DIRECTORY OWNERSHIP AND PERMISSIONS</h2><p> The core CIFS protocol does not provide unix ownership
information or mode for files and directories. Because of this, files
and directories will generally appear to be owned by whatever values the
uid= or gid= options are set, and will have permissions set to the
default file_mode and dir_mode for the mount. Attempting to change these
values via chmod/chown will return success but have no effect.</p><p>When the client and server negotiate unix extensions,
files and directories will be assigned the uid, gid, and mode provided
by the server. Because CIFS mounts are generally single-user, and the
same credentials are used no matter what user accesses the mount, newly
created files and directories will generally be given ownership
corresponding to whatever credentials were used to mount the
share.</p><p>If the uid's and gid's being used do not match on the
client and server, the forceuid and forcegid options may be helpful.
Note however, that there is no corresponding option to override the
mode. Permissions assigned to a file when forceuid or forcegid are in
effect may not reflect the the real permissions.</p><p>When unix extensions are not negotiated, it's also
possible to emulate them locally on the server using the "dynperm" mount
option. When this mount option is in effect, newly created files and
directories will receive what appear to be proper permissions. These
permissions are not stored on the server however and can disappear at
any time in the future (subject to the whims of the kernel flushing out
the inode cache). In general, this mount option is discouraged.
	</p><p>It's also possible to override permission checking on the client
altogether via the noperm option. Server-side permission checks cannot be
overriden. The permission checks done by the server will always correspond to
the credentials used to mount the share, and not necessarily to the user who is accessing the share.</p></div><div class="refsect1" lang="en"><a name="id2532781"></a><h2>ENVIRONMENT VARIABLES</h2><p>
		The variable <span class="emphasis"><em>USER</em></span> may contain the username of the
person to be used to authenticate to the server.
The variable can be used to set both username and
password by using the format username%password.
	</p><p>
		The variable <span class="emphasis"><em>PASSWD</em></span> may contain the password of the
person using the client.
	</p><p>
		The variable <span class="emphasis"><em>PASSWD_FILE</em></span> may contain the pathname
of a file to read the password from. A single line of input is
read and used as the password.
	</p></div><div class="refsect1" lang="en"><a name="id2532813"></a><h2>NOTES</h2><p>This command may be used only by root, unless installed setuid, in which case the noeexec and nosuid mount flags are enabled. When installed as a setuid program, the program follows the conventions set forth by the mount program for user mounts.</p><p>
	Some samba client tools like smbclient(8) honour client-side
	configuration parameters present in smb.conf. Unlike those
	client tools, <span class="emphasis"><em>mount.cifs</em></span> ignores smb.conf
	completely.
	</p></div><div class="refsect1" lang="en"><a name="id2532836"></a><h2>CONFIGURATION</h2><p>
The primary mechanism for making configuration changes and for reading 
debug information for the cifs vfs is via the Linux /proc filesystem.
In the directory <code class="filename">/proc/fs/cifs</code> are various 
configuration files and pseudo files which can display debug information.  
There are additional startup options such as maximum buffer size and number
of buffers which only may be set when the kernel cifs vfs (cifs.ko module) is 
loaded.  These can be seen by running the modinfo utility against the file
cifs.ko which will list the options that may be passed to cifs during module
installation (device driver load).
For more information see the kernel file <code class="filename">fs/cifs/README</code>.
</p></div><div class="refsect1" lang="en"><a name="id2532866"></a><h2>BUGS</h2><p>Mounting using the CIFS URL specification is currently not supported.
	</p><p>The credentials file does not handle usernames or passwords with
		leading space.</p><p>
Note that the typical response to a bug report is a suggestion
to try the latest version first. So please try doing that first,
and always include which versions you use of relevant software
when reporting bugs (minimum: mount.cifs (try mount.cifs -V), kernel (see /proc/version) and
server type you are trying to contact.
</p></div><div class="refsect1" lang="en"><a name="id2532891"></a><h2>VERSION</h2><p>This man page is correct for version 1.52 of 
	the cifs vfs filesystem (roughly Linux kernel 2.6.24).</p></div><div class="refsect1" lang="en"><a name="id2532902"></a><h2>SEE ALSO</h2><p>
	Documentation/filesystems/cifs.txt and fs/cifs/README in the linux kernel
	source tree may contain additional options and information.
</p><p><a class="citerefentry" href="umount.cifs.8.html"><span class="citerefentry"><span class="refentrytitle">umount.cifs</span>(8)</span></a></p></div><div class="refsect1" lang="en"><a name="id2532923"></a><h2>AUTHOR</h2><p>Steve French</p><p>The syntax and manpage were loosely based on that of smbmount. It 
		was converted to Docbook/XML by Jelmer Vernooij.</p><p>The maintainer of the Linux cifs vfs and the userspace
		tool <span class="emphasis"><em>mount.cifs</em></span> is <a class="ulink" href="mailto:sfrench@samba.org" target="_top">Steve French</a>.
		The <a class="ulink" href="mailto:linux-cifs-client@lists.samba.org" target="_top">Linux CIFS Mailing list</a> 
		is the preferred place to ask questions regarding these programs. 
	</p></div></div></body></html>
